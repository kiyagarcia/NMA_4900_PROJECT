html, body {
 margin: 0;
 padding: 0;
 width: 100%;
 height: 100%;
}


/* Environment: mid tone */
#scene {
 width: 100%;
 height: 100%;
 background: radial-gradient(circle at center, #9fb6d9, #2a4f8a);
 position: relative;
 overflow: hidden;
 transition: background 0.2s linear, filter 0.3s ease;
}


/* Student: lightest */
#student {
 width: 120px;
 height: 180px;
 background: rgba(226, 239, 255, 0.95);
 border-radius: 60px;
 transition: opacity 0.2s ease;
 position: relative;   /* THIS LINE IS CRUCIAL */
}

#shadow {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.shadow-core {
  position: absolute;
  width: 260px;
  height: 300px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(15, 15, 34, 0.65);
  border-radius: 50%;
  z-index: 1;
}

.arm {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 110px;
  height: 40px;
  background: rgba(15, 15, 34, 0.8);
  border-radius: 40px;
  opacity: 0;
  pointer-events: none;
  z-index: 3;
  transition:
    transform 0.6s ease,
    opacity 0.4s ease;
}

/* Start position — pulled outward */
.left-arm {
  transform: translate(-160px, -50%);
}

.right-arm {
  transform: translate(50px, -50%);
}

/* Hug state — slide inward */
.hugging-arms .left-arm {
  opacity: 1;
  transform: translate(-95px, -50%);
}

.hugging-arms .right-arm {
  opacity: 1;
  transform: translate(-15px, -50%);
}

#shadow.hugging .shadow-core {
  background: rgba(15, 15, 34, 0.85);
}

#studentWrap, #shadowWrap {
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translate(-50%, -50%);
}


#studentWrap {
 z-index: 2;
}


#shadowWrap {
 z-index: 1;
}


@keyframes floatSelf {
 0% { transform: translate(-50%, -50%) translateY(0); }
 50% { transform: translate(-50%, -50%) translateY(-18px); }
 100% { transform: translate(-50%, -50%) translateY(0); }
}


@keyframes floatProtector {
 0% { transform: translate(-50%, -50%) translateY(0); }
 50% { transform: translate(-50%, -50%) translateY(12px); }
 100% { transform: translate(-50%, -50%) translateY(0); }
}


/* animations exist, but are paused unless .idle is present */
#studentWrap {
 animation: floatSelf 6s ease-in-out infinite;
 animation-play-state: paused;
}


#shadowWrap {
 animation: floatProtector 7.5s ease-in-out infinite;
 animation-play-state: paused;
}


#studentWrap.idle, #shadowWrap.idle {
 animation-play-state: running;
}


#heart {
 position: absolute;
 top: 50%;
 left: 50%;
 width: 14px;
 height: 14px;
 background: red;
 transform: translate(-50%, -50%) rotate(45deg);
 border-radius: 3px;
 animation: heartbeat 2.2s ease-in-out infinite;
 z-index: 3;
}


#heart::before,
#heart::after {
 content: "";
 position: absolute;
 width: 14px;
 height: 14px;
 background: inherit;
 border-radius: 50%;
}


#heart::before {
 top: -7px;
 left: 0;
}


#heart::after {
 left: -7px;
 top: 0;
}


@keyframes heartbeat {
 0%   { transform: translate(-50%, -50%) rotate(45deg) scale(1); }
 15%  { transform: translate(-50%, -50%) rotate(45deg) scale(1.2); }
 30%  { transform: translate(-50%, -50%) rotate(45deg) scale(1); }
 100% { transform: translate(-50%, -50%) rotate(45deg) scale(1); }
}
